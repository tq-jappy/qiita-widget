(function(){"use strict";var Item,ItemRepository,User,addOnloadHandler,corsRequest,getElementsByClassName,main,setIframeHeight,setInnerText,template;Item=function(){function Item(item){var tag,_i,_len,_ref;for(this.title=item.title,this.url=item.url,this.tags=[],_ref=item.tags,_i=0,_len=_ref.length;_len>_i;_i++)tag=_ref[_i],this.tags.push({name:tag.name,url:"http://qiita.com/tags/"+tag.name});this.user=new User(item.user)}return Item}(),ItemRepository=function(){function ItemRepository(){}return ItemRepository.prototype.itemContainer={},ItemRepository.prototype.findByUsername=function(username,callback){return username in this.itemContainer?void callback(this.itemContainer[username]):corsRequest("https://qiita.com/api/v1/users/"+username+"/items?per_page=5",function(_this){return function(rows){var row,_i,_len;for(_this.itemContainer[username]=[],_i=0,_len=rows.length;_len>_i;_i++)row=rows[_i],_this.itemContainer[username].push(new Item(row));return callback(_this.itemContainer[username])}}(this))},ItemRepository}(),User=function(){function User(user){this.name=user.url_name,this.profileImageUrl=user.profile_image_url,this.url="http://qiita.com/users/"+this.name}return User}(),corsRequest=function(url,callback){var method,request;if(method="get",request=new XMLHttpRequest,"withCredentials"in request)request.open(method,url,!0);else{if("undefined"==typeof XDomainRequest)throw"Failed to initialize CORSRequest";request=new XDomainRequest,request.open(method,url)}return request.onload=function(){return function(){var result;if(result=JSON.parse(request.response),request.status<200||300<=request.status)throw result.error;return callback(result)}}(this),request.send()},getElementsByClassName=function(oElm,strTagName,strClassName){var arrElements,arrReturnElements,i,oElement,oRegExp,_i,_ref;for(arrElements="*"===strTagName&&oElm.all?oElm.all:oElm.getElementsByTagName(strTagName),arrReturnElements=[],strClassName=strClassName.replace(/\-/g,"\\-"),oRegExp=new RegExp("(^|\\s)"+strClassName+"(\\s|$)"),i=_i=0,_ref=arrElements.length;_ref>=0?_ref>=_i:_i>=_ref;i=_ref>=0?++_i:--_i)oElement=arrElements[i],oElement&&oRegExp.test(oElement.className)&&arrReturnElements.push(oElement);return arrReturnElements},addOnloadHandler=function(newFunction){return window.addEventListener?window.addEventListener("load",newFunction,!1):window.attachEvent?window.attachEvent("onload",newFunction):void 0},setIframeHeight=function(iframe){var iframeWin;return iframe&&(iframeWin=iframe.contentWindow||iframe.contentDocument.parentWindow,iframeWin.document.body)?iframe.height=iframeWin.document.documentElement.scrollHeight||iframeWin.document.body.scrollHeight:void 0},setInnerText=function(element,text){return"undefined"!=typeof element.textContent?element.textContent=text:element.innerText=text},template='<!DOCTYPE html>\n<html lang="ja">\n<head>\n<meta charset="utf-8" />\n<style type="text/css">\nbody{padding:0;margin:0;background:#fff}.bar{height:30px;overflow:hidden;line-height:30px;text-overflow:ellipsis;white-space:nowrap;vertical-align:middle;background:-webkit-linear-gradient(top,#313a29,#21291a);background:-moz-linear-gradient(top,#313a29,#21291a);background:-ms-linear-gradient(top,#313a29,#21291a);background:-o-linear-gradient(top,#313a29,#21291a);background:linear-gradient(top,#313a29,#21291a);border-bottom:3px solid #59bb0c}.logo{display:block;float:left;width:65px;height:30px;padding:0 10px;margin:0 15px;background:#59bb0c url(data:image/png;base64,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) center center no-repeat}a.user{font-size:14px;color:#fff;text-decoration:none}a.user:hover{text-decoration:underline}.avatar{width:14px;height:14px;margin-right:3px}.title{font-weight:bold;color:#117ec6;text-decoration:none;word-wrap:break-word}.title:hover{text-decoration:underline}.tag{display:inline-block;height:14px;padding:0 3px;margin:0 2px;font-size:10px;line-height:14px;color:#fff;text-decoration:none;vertical-align:middle;background-color:#59bb0c;border-radius:3px}.tag:hover{text-decoration:underline}.item{padding:5px 15px;font-size:14px;line-height:18px;border-bottom:1px solid #ddd}\n</style>\n</head>\n<body>\n<div class="bar">\n	<a href="http://qiita.com" class="logo" target="_blank"></a>\n	<a href="" class="user" id="user_url" target="_blank">\n		<img class="avatar" src="#" id="user_avatar">\n		<span class="username" id="user_name"></span>\n	</a>\n</div>\n<div class="items" id="items"></div>\n</body>\n</html>',(main=function(){var widgets;return widgets=getElementsByClassName(document,"a","qiita-timeline"),addOnloadHandler(function(){var doc,iframe,itemRepository,itemsBlock,username,widget,_i,_len,_results;for(_results=[],_i=0,_len=widgets.length;_len>_i;_i++)widget=widgets[_i],username=widget.getAttribute("data-qiita-username"),iframe=document.createElement("iframe"),iframe.style.display="none",iframe.setAttribute("frameBorder","0"),iframe.style.width="100%",widget.parentNode.appendChild(iframe),widget.style.display="none",doc=frames[frames.length-1].document,doc.open(),doc.write(template),doc.close(),setInnerText(doc.getElementById("user_name"),username),itemsBlock=doc.getElementById("items"),itemRepository=new ItemRepository,_results.push(itemRepository.findByUsername(username,function(items){var item,itemElement,tag,tagElement,title,_j,_k,_len1,_len2,_ref;for(items.length>0&&(doc.getElementById("user_avatar").setAttribute("src",items[0].user.profileImageUrl),doc.getElementById("user_url").setAttribute("href",items[0].user.url)),_j=0,_len1=items.length;_len1>_j;_j++){for(item=items[_j],itemElement=document.createElement("div"),itemElement.setAttribute("class","item"),title=document.createElement("a"),setInnerText(title,item.title),title.setAttribute("href",item.url),title.setAttribute("class","title"),title.setAttribute("target","_blank"),itemElement.appendChild(title),_ref=item.tags,_k=0,_len2=_ref.length;_len2>_k;_k++)tag=_ref[_k],tagElement=document.createElement("a"),setInnerText(tagElement,tag.name),tagElement.setAttribute("href",tag.url),tagElement.setAttribute("class","tag"),tagElement.setAttribute("target","_blank"),itemElement.appendChild(tagElement);itemsBlock.appendChild(itemElement)}return iframe.style.display="block",setIframeHeight(iframe)}));return _results})})()}).call(this);